# Nginx 静态文件配置
# 将此配置添加到您的 Nginx 站点配置中

# 直接通过 Nginx 服务静态文件（推荐）
location /uploads/ {
    alias /www/wwwroot/ln.tuojiayi.com/backend/uploads/;
    
    # 允许所有图片格式
    location ~* \.(jpg|jpeg|png|gif|webp|svg)$ {
        expires 7d;
        add_header Cache-Control "public, immutable";
        access_log off;
    }
    
    # 安全设置
    location ~ /\. {
        deny all;
    }
    
    # 错误处理
    try_files $uri $uri/ =404;
}

# 或者代理到后端服务（备选方案）
# location /uploads/ {
#     proxy_pass http://127.0.0.1:3000/uploads/;
#     proxy_set_header Host $host;
#     proxy_set_header X-Real-IP $remote_addr;
#     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#     proxy_set_header X-Forwarded-Proto $scheme;
# }
