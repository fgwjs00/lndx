# 极简的uploads静态文件配置
# 请替换您当前站点配置中的 location /uploads/ 部分

location /uploads/ {
    alias /www/wwwroot/ln.tuojiaya.com/backend/uploads/;
    
    # 基本设置
    autoindex off;
    
    # 允许所有文件类型（测试用）
    location ~* \.(jpg|jpeg|png|gif|webp|svg|pdf|txt|doc|docx)$ {
        # 开启访问日志用于调试
        access_log /www/server/nginx/logs/uploads_access.log;
        
        # 基本CORS支持
        add_header Access-Control-Allow-Origin "*";
        
        # 调试头信息
        add_header X-Debug-Alias "/www/wwwroot/ln.tuojiaya.com/backend/uploads/";
        add_header X-Debug-RequestURI $request_uri;
        add_header X-Debug-URI $uri;
        
        # 简单缓存
        expires 1d;
    }
    
    # 如果文件不存在返回404
    try_files $uri =404;
}
